<ul class="list-container group">
  <li class="list-title">
    <h3><%= list.get("title") %></h3>
    <span id="delete-list-btn"></span>
  </li>
  <li class="cards-list-li">
    <ul id="cards-ul" list-id="<%= list.id %>" class="cards-ul">
      <li class="sortable-dropzone"></li>
    </ul>
  </li>
  <li class="add-card-li"><a href="#" class="add-card-link">Add a card...</a></li>
</ul>


<script>
  $(function(){
    $('.cards-ul').sortable({
      connectWith: '.cards-ul',
      placeholder: "card-sortable-placeholder",
      forcePlaceholderSize: true,
      start: function(e, ui){
        ui.placeholder.height(ui.helper.outerHeight());
      },
      update: function(event, ui){
        var list_id = $(ui.item).closest(".cards-ul").attr("list-id");
        $(ui.item).trigger('switchList', list_id);
        
        $(".cards-show-el").each(function(index){
          $(this).trigger('drop', index);
        })
      }
    })
  })
</script>